(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{6928:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},a=n(65),s=function(e,t){return r.createElement(a.Z,Object.assign({},e,{ref:t,icon:c}))};s.displayName="CommentOutlined";var i=r.forwardRef(s)},7569:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"},a=n(65),s=function(e,t){return r.createElement(a.Z,Object.assign({},e,{ref:t,icon:c}))};s.displayName="HeartFilled";var i=r.forwardRef(s)},7206:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},a=n(65),s=function(e,t){return r.createElement(a.Z,Object.assign({},e,{ref:t,icon:c}))};s.displayName="HeartOutlined";var i=r.forwardRef(s)},1075:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},a=n(65),s=function(e,t){return r.createElement(a.Z,Object.assign({},e,{ref:t,icon:c}))};s.displayName="RollbackOutlined";var i=r.forwardRef(s)},5592:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},a=n(65),s=function(e,t){return r.createElement(a.Z,Object.assign({},e,{ref:t,icon:c}))};s.displayName="SyncOutlined";var i=r.forwardRef(s)},802:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(5893),c=n(7294),a=n(8341),s=n.n(a),i=n(381),l=n.n(i),o=n(1940),u=n(6902),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},m=n(65),f=function(e,t){return c.createElement(m.Z,Object.assign({},e,{ref:t,icon:d}))};f.displayName="EditOutlined";var h=c.forwardRef(f),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},v=function(e,t){return c.createElement(m.Z,Object.assign({},e,{ref:t,icon:p}))};v.displayName="DeleteOutlined";var x=c.forwardRef(v),g=n(7569),j=n(7206),N=n(6928),b=n(2807),y=n(1163),w=n(4317),k=n(1664),_=function(e){var t=e.post,n=e.handleDelete,a=e.handleLike,i=e.handleUnlike,d=e.handleComment,m=e.commentsCount,f=void 0===m?10:m,p=e.removeComment,v=(0,c.useContext)(b.S)[0],_=(0,y.useRouter)();return(0,r.jsx)(r.Fragment,{children:t&&t.postedBy&&(0,r.jsxs)("div",{className:"card mb-5",children:[(0,r.jsxs)("div",{className:"card-header",children:[(0,r.jsx)(o.C,{size:40,src:(0,w.d)(t.postedBy)}),(0,r.jsx)("span",{className:"pt-2 ml-3",style:{marginLeft:"1rem"},children:t.postedBy.name}),(0,r.jsx)("span",{className:"pt-2 ml-3",style:{marginLeft:"1rem"},children:l()(t.createdAt).fromNow()})]}),(0,r.jsx)("div",{className:"card-body",children:s()(t.content)}),(0,r.jsxs)("div",{className:"card-footer",children:[t.image&&(0,r.jsx)(u.Z,{url:t.image.url}),(0,r.jsxs)("div",{className:"d-flex pt-2",children:[v&&v.user&&t.likes&&t.likes.includes(v.user._id)?(0,r.jsx)(g.Z,{onClick:function(){return i(t._id)},className:"text-danger pt-2 h5 px-2"}):(0,r.jsx)(j.Z,{onClick:function(){return a(t._id)},className:"text-danger pt-2 h5 px-2"}),(0,r.jsxs)("div",{className:"pt-2 pl-3",style:{marginRight:"1rem"},children:[t.likes.length," likes"]}),(0,r.jsx)(N.Z,{onClick:function(){return d(t)},className:"text-danger pt-2 h5 px-2"}),(0,r.jsx)("div",{className:"pt-2 pl-3",children:(0,r.jsx)(k.default,{href:"/post/".concat(t._id),children:(0,r.jsxs)("a",{children:[t.comments.length," comments"]})})}),v&&v.user&&v.user._id===t.postedBy._id&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{onClick:function(){return _.push("/user/post/".concat(t._id))},className:"text-danger pt-2 h5 px-2 mx-auto"}),(0,r.jsx)(x,{onClick:function(){return n(t)},className:"text-danger pt-2 h5 px-2"})]})]})]}),t.comments&&t.comments.length>0&&(0,r.jsx)("ol",{className:"list-group",style:{maxHeight:"125px",overflow:"scroll"},children:t.comments.slice(0,f).map((function(e){return(0,r.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:[(0,r.jsxs)("div",{className:"ms-2 me-auto",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.C,{size:20,className:"mb-1 mr-3",src:(0,w.d)(e.postedBy)}),"\xa0",e.postedBy.name]}),(0,r.jsx)("i",{className:"text-muted",children:e.text})]}),(0,r.jsxs)("span",{className:"badge rounded-pill text-muted",children:[l()(e.created).fromNow(),v&&v.user&&v.user._id===e.postedBy._id&&(0,r.jsx)("div",{className:"ml-auto mt-1",children:(0,r.jsx)(x,{onClick:function(){return p(t._id,e)},className:"pl-2 text-danger"})})]})]},e._id)}))})]},t._id)})}},6902:function(e,t,n){"use strict";var r=n(5893);t.Z=function(e){var t=e.url;return(0,r.jsx)("div",{style:{backgroundImage:"url("+t+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover",height:"300px"}})}},694:function(e,t,n){"use strict";var r=n(5893),c=n(7757),a=n.n(c),s=n(2137),i=n(7294),l=n(9669),o=n.n(l),u=n(1163),d=n(5592),m=n(2807);t.Z=function(e){var t=e.children,n=(0,i.useState)(!1),c=n[0],l=n[1],f=(0,u.useRouter)(),h=(0,i.useContext)(m.S)[0];(0,i.useEffect)((function(){h&&h.token&&p()}),[h&&h.token]);var p=function(){var e=(0,s.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/current-user");case 3:t=e.sent,t.data.ok&&l(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return null===h&&setTimeout((function(){p()}),1e3),c?(0,r.jsxs)(r.Fragment,{children:[" ",t]}):(0,r.jsx)(d.Z,{spin:!0,className:"d-flex justify-content-center display-1 text-primary p-5"})}},4317:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});var r=function(e){return e.image?e.image.url:"/images/logo.png"}},1592:function(e,t,n){"use strict";n.r(t);var r=n(5893),c=n(7757),a=n.n(c),s=n(2137),i=n(7294),l=n(1163),o=n(9669),u=n.n(o),d=(n(694),n(802)),m=n(1664),f=n(1075);t.default=function(){var e=(0,i.useState)({}),t=e[0],n=e[1],c=(0,l.useRouter)().query._id;(0,i.useEffect)((function(){c&&o()}),[c]);var o=function(){var e=(0,s.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get("/user-post/".concat(c));case 3:t=e.sent,r=t.data,n(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,u().put("/remove-comment",{postId:t,comment:n});case 6:r=e.sent,c=r.data,console.log("comment removed",c),o(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)("div",{className:"row py-5 text-light bg-default-image",children:(0,r.jsx)("div",{className:"col text-center",children:(0,r.jsx)("h1",{children:"MERNCAMP"})})}),(0,r.jsx)("div",{className:"container col-md-8 offset-md-2 pt-5",children:(0,r.jsx)(d.Z,{post:t,commentsCount:100,removeComment:h})}),(0,r.jsx)(m.default,{href:"/user/dashboard",children:(0,r.jsx)("a",{className:"d-flex justify-content-center p-5",children:(0,r.jsx)(f.Z,{})})})]})}},3232:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[_id]",function(){return n(1592)}])},2361:function(){},4616:function(){}},function(e){e.O(0,[885,65,764,341,774,888,179],(function(){return t=3232,e(e.s=t);var t}));var t=e.O();_N_E=t}]);