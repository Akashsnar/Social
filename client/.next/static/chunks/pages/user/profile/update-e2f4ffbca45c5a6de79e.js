(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{5008:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(7294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},n=r(65),l=function(e,t){return s.createElement(n.Z,Object.assign({},e,{ref:t,icon:a}))};l.displayName="CameraOutlined";var c=s.forwardRef(l)},8268:function(e,t,r){"use strict";var s=r(5893),a=r(5592);t.Z=function(e){var t=e.handleSubmit,r=e.name,n=e.setName,l=e.email,c=e.setEmail,o=e.password,i=e.setPassword,u=e.secret,d=e.setSecret,m=e.loading,p=e.page,f=e.username,h=e.setUsername,x=e.about,j=e.setAbout,v=e.profileUpdate;return(0,s.jsxs)("form",{onSubmit:t,children:[v&&(0,s.jsxs)("div",{className:"form-group p-2",children:[(0,s.jsx)("small",{children:(0,s.jsx)("label",{className:"text-muted",children:"Username"})}),(0,s.jsx)("input",{value:f,onChange:function(e){return h(e.target.value)},type:"text",className:"form-control",placeholder:"Enter name"})]}),v&&(0,s.jsxs)("div",{className:"form-group p-2",children:[(0,s.jsx)("small",{children:(0,s.jsx)("label",{className:"text-muted",children:"About"})}),(0,s.jsx)("input",{value:x,onChange:function(e){return j(e.target.value)},type:"text",className:"form-control",placeholder:"Write about yourself.."})]}),"login"!==p&&(0,s.jsxs)("div",{className:"form-group p-2",children:[(0,s.jsx)("small",{children:(0,s.jsx)("label",{className:"text-muted",children:"Your name"})}),(0,s.jsx)("input",{value:r,onChange:function(e){return n(e.target.value)},type:"text",className:"form-control",placeholder:"Enter name"})]}),(0,s.jsxs)("div",{className:"form-group p-2",children:[(0,s.jsx)("small",{children:(0,s.jsx)("label",{className:"text-muted",children:"Email address"})}),(0,s.jsx)("input",{value:l,onChange:function(e){return c(e.target.value)},type:"email",className:"form-control",placeholder:"Enter name",disabled:v})]}),(0,s.jsxs)("div",{className:"form-group p-2",children:[(0,s.jsx)("small",{children:(0,s.jsx)("label",{className:"text-muted",children:"Password"})}),(0,s.jsx)("input",{value:o,onChange:function(e){return i(e.target.value)},type:"password",className:"form-control",placeholder:"Enter password"})]}),"login"!==p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form-group p-2",children:[(0,s.jsx)("small",{children:(0,s.jsx)("label",{className:"text-muted",children:"Pick a question"})}),(0,s.jsxs)("select",{className:"form-control",children:[(0,s.jsx)("option",{children:"What is your favourite color?"}),(0,s.jsx)("option",{children:"What is your best friend's name?"}),(0,s.jsx)("option",{children:"What city you were born?"})]}),(0,s.jsx)("small",{className:"form-text text-muted",children:"You can use this to reset your password if forgotten."})]}),(0,s.jsx)("div",{className:"form-group p-2",children:(0,s.jsx)("input",{value:u,onChange:function(e){return d(e.target.value)},type:"text",className:"form-control",placeholder:"Write your answer here"})})]}),(0,s.jsx)("div",{className:"form-group p-2",children:(0,s.jsx)("button",{disabled:v?m:"login"===p?!l||!o||m:!r||!l||!u||!o||m,className:"btn btn-primary col-12",children:m?(0,s.jsx)(a.Z,{spin:!0,className:"py-1"}):"Submit"})})]})}},2655:function(e,t,r){"use strict";r.r(t);var s=r(5893),a=r(7757),n=r.n(a),l=r(6156),c=r(2137),o=r(7294),i=r(9669),u=r.n(i),d=r(9249),m=r(1940),p=r(5531),f=r(1664),h=r(8268),x=r(2807),j=r(1163),v=r(7085),g=r(5008);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e=(0,o.useState)(""),t=e[0],r=e[1],a=(0,o.useState)(""),l=a[0],i=a[1],b=(0,o.useState)(""),y=b[0],w=b[1],O=(0,o.useState)(""),S=O[0],E=O[1],P=(0,o.useState)(""),C=P[0],_=P[1],Z=(0,o.useState)(""),k=Z[0],A=Z[1],D=(0,o.useState)(!1),z=D[0],H=D[1],U=(0,o.useState)(!1),W=U[0],Y=U[1],F=(0,o.useState)({}),I=F[0],J=F[1],L=(0,o.useState)(!1),M=L[0],R=L[1],T=(0,o.useContext)(x.S),V=T[0],X=T[1];(0,j.useRouter)();(0,o.useEffect)((function(){V&&V.user&&(r(V.user.username),i(V.user.about),w(V.user.name),E(V.user.email),J(V.user.image))}),[V&&V.user]);var q=function(){var e=(0,c.Z)(n().mark((function e(r){var s,a,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,Y(!0),e.next=5,u().put("/profile-update",{username:t,about:l,name:y,email:S,password:C,secret:k,image:I});case 5:s=e.sent,a=s.data,console.log("update response => ",a),a.error?(d.Am.error(a.error),Y(!1)):((c=JSON.parse(localStorage.getItem("auth"))).user=a,localStorage.setItem("auth",JSON.stringify(c)),X(N(N({},V),{},{user:a})),H(!0),Y(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),d.Am.error(e.t0.response.data),Y(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,c.Z)(n().mark((function e(t){var r,s,a,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files[0],(s=new FormData).append("image",r),R(!0),e.prev=4,e.next=7,u().post("/upload-image",s);case 7:a=e.sent,l=a.data,J({url:l.url,public_id:l.public_id}),R(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0),R(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsx)("div",{className:"row py-5 text-light bg-default-image",children:(0,s.jsx)("div",{className:"col text-center",children:(0,s.jsx)("h1",{children:"Profile"})})}),(0,s.jsx)("div",{className:"row py-5",children:(0,s.jsxs)("div",{className:"col-md-6 offset-md-3",children:[(0,s.jsxs)("label",{className:"d-flex justify-content-center h5",children:[I&&I.url?(0,s.jsx)(m.C,{size:30,src:I.url,className:"mt-1"}):M?(0,s.jsx)(v.Z,{className:"mt-2"}):(0,s.jsx)(g.Z,{className:"mt-2"}),(0,s.jsx)("input",{onChange:B,type:"file",accept:"images/*",hidden:!0})]}),(0,s.jsx)(h.Z,{profileUpdate:!0,username:t,setUsername:r,about:l,setAbout:i,handleSubmit:q,name:y,setName:w,email:S,setEmail:E,password:C,setPassword:_,secret:k,setSecret:A,loading:W})]})}),(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(p.Z,{title:"Congratulations!",visible:z,onCancel:function(){return H(!1)},footer:null,children:(0,s.jsx)("p",{children:"You have successfully updated your profile."})})})}),(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("p",{className:"text-center",children:["Already registered?"," ",(0,s.jsx)(f.default,{href:"/login",children:(0,s.jsx)("a",{children:"Login"})})]})})})]})}},2568:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/profile/update",function(){return r(2655)}])}},function(e){e.O(0,[65,90,774,888,179],(function(){return t=2568,e(e.s=t);var t}));var t=e.O();_N_E=t}]);